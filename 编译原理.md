# 编译原理笔记
## 上机
- 第 3，4，6，8，10，12 周
- 周一、周二晚任选
- 地点
    - 第 3, 4, 6 周
        - 周一 C201
        - 周二 C207、C211
    - 第 8, 10, 12 周 B204
---
第三章是考试重点

---
## 第二节
词法分析：把原始的字符串流形式的**程序文本**转换为**词法记号流**的形式。
### 词法单元与词法记号
* 词法单元：又称单词，是编程语言中*合法的字符串*。
* 词法记号：满足某种规则的词法单元，采用同一种记法。
* 满足一个 *给定规则（也称模式）* 的词法单元，被称为一个词法记号。
* 每个词法记号具有一定的含义（属性）。
* 语法分析使用词法记号，语义分析使用词法单元。
### 词法错误
* 恢复策略：紧急方式
### 语言的运算
* 指数：**L<sup>0</sup> 是空串**，L<sup>i</sup>=L<sup>i-1</sup>L
* 闭包：L<sup>*</sup> = L<sup>0</sup> U L<sup>1</sup> U L<sup>2</sup> U …… = L<sup>+</sup> U L<sup>0</sup>
* 正闭包：L<sup>+</sup> = L<sup>1</sup> U L<sup>2</sup> U ……
* 其实就是正则里面的 * 和 +。
### 正规式（正则表达式）
* 说明词法单元如何对应到词法记号的模式。
* 优先级：<sup>*+</sup>(闭包、正闭包) > 连接运算 > |(和)。
### 课后练习：
* 编写一个程序，用于统计文件中单词的个数与不同单词的个数。
---
## 第三节，第四节
### 词法记号的识别
- 等同于对字符串的匹配过程
- 可以基于*有限状态机*来完成
    - 单圈中间状态，双圈最终状态，双圈星号表示不处理退出。
    - > [有限状态机（英语：finite-state machine，缩写：FSM）又称有限状态自动机，简称状态机，是表示有限个状态以及在这些状态之间的转移和动作等行为的数学模型。](https://zh.wikipedia.org/zh-hans/%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA)

### 有限自动机
计算机转换正规式的步骤  
正规式 => 不确定有限自动机 => 确定有限自动机 => 状态转换图

### 确定有限自动机 (DFA)
- 不允许空串
- 状态对某个字符最多有一个输出边
- 贴近计算机认识

### 不确定的有限自动机 (NFA)
- 允许输入空串
- **状态对某个字符可能有多个输出边**(与 DFA 的主要区分点)
- 贴近人类认识

```regex
(a|b)*ab
```

### 状态转移表
- *见课本*
- 表中所有状态转移集合只有一项的是 DFA

### DFA 构建方法
#### 自然语言描述 => DFA
1. 列出全部可能的状态
2. 从各个状态出发，构造边及输入字符记号

#### 正规式 => DFA

#### 正规式 => NFA => DFA (见课本)
1. NFA 构建
    1. 构造识别*空串*和*字母表中一个符号*的 NFA
    2. 构造识别主算符为*选择*的正规式的 NFA
    3. 构造识别主算符为*连接*的正规式的 NFA
    4. 构造识别主算符为*闭包*的正规式的 NFA
2. NFA => DFA 的转化
- 子集构造法（**看 PPT**）
    - DFA 的一个状态是 NFA 的一个状态集合
    1. 寻找所有等价状态
    2. 画出所有等价状态之间的状态转换图
1. DFA 化简（**看 PPT**)
- 状态的可区分性
- 化简时 DFA 的状态转换函数必须是一个*全函数*
    - 全函数：每个状态对字母表上每一个字母都有对应的输出边（自回环不算）

### 课后练习
- <del>字符串最多有两个1的01字符串正则表达式。</del>
```regex
^0*1?0*1?0*$
```
- <del>学习一下有限状态机的图形。</del>
- <del>构建识别能被 3 整除的二进制数的 DFA</del>
- <del>偶数个 0 偶数个 1 的正则表达式</del>
```regex
^(00|11)*((01|10)(00|11)*(01|10)(00|11)*)*$
```
- <del>**(周五交)书上习题 2.3**</del>
- <del>编写识别 `(a|b)*ab` 的程序
    - 基于 DFA，用状态转移表格来做
    - 状态转移表的数据结构定义自选</del>
- <del>**(下周二交)2.7(c)(d), 2.8(仅为 2.7(c)), 2.12(a)**</del>
- <del>构造 DFA，接受 0 和 1 的个数都是偶数的二进制串</del>
---
## 第五节
### Flex
---
## 第六节
### 语法分析
- 目标：线性的词法记号流 => 语法树
- 实质：无结构的数据转化为有结构的数据
- 依据：上下文无关语法

### 上下文无关文法
